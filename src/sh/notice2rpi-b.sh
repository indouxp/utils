#!/bin/sh
###########################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################
#
# /home/pi/notice.txtを、rpi-bにscpする。
#
###########################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################
NAME=${0##*/}

if [ "" = "$(which expect)" ]; then
  echo "${NAME:?}:no expect." 1>&2
  exit 1
fi

#if [ ! -x $(which expect) ]; then
#  echo "${NAME:?}:expect not execute." 1>&2
#  exit 1
#fi

PW="BantamWeight"
FILE="/home/pi/notice.txt"
expect -c "
  set timeout 5
  spawn env LANG=C scp -p ${FILE:?} pi@rpi-b:/home/pi
  expect {
    \"Are you sure you want to continue connecting (yes/no)?\" {
      send \"yes\n\"
      exp_continue
    }
    \"password:\" {
      send \"${PW}\n\"
    }
  }
  expect \"$\"
  exit 0
"
